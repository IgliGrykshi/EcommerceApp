(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,a){e.exports=a(45)},24:function(e,t,a){},25:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(10),l=a.n(r),c=(a(24),a(25),a(15)),s=a(11),i=a(12),u=a(16),d=a(13),m=a(2),g=a(17),h=a(14),p=a.n(h),v=function(e){var t=e.item;return o.a.createElement("li",null,o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"card-body"},o.a.createElement("h5",{className:"card-title",style:{fontSize:t.size}},t.face),o.a.createElement("p",{className:"card-text"},"$",t.price/100),o.a.createElement("p",{className:"card-text"},function(e){e=new Date(e);var t=new Date(Date.now()),a=Math.round((t.getTime()-e.getTime())/864e5);return 0==a?0==(a=Math.round((t.getTime()-e.getTime())/36e5))?1==(a=Math.round((t.getTime()-e.getTime())/6e4))?a+" minute ago":0==a?"now":a+=" minutes ago":a+=1==a?" hour ago":" hours ago":a>6?e.getDate()+"-"+(e.getMonth()+1)+"-"+e.getFullYear():a+=1==a?" day ago":" days ago"}(t.date)))))},f=function(e){var t=e.items;return o.a.createElement("ol",{className:"noBullets"},t.map(function(e,t){return o.a.createElement("div",null,o.a.createElement(v,{key:e.id,item:e}),(t+1)%20==0?o.a.createElement("img",{className:"ad",src:"/ads/?r="+Math.floor(1e3*Math.random())}):"",499==t?o.a.createElement("div",{className:"alignCenter mb10"},"~ end of catalogue ~"):"")}))},E=function(){return o.a.createElement("div",{className:"spinner-grow mb10",role:"status"},o.a.createElement("span",{className:"sr-only"},"Loading..."))},w=function(e){var t=e.handleChange,a=e.value,n=e.handleClick;return o.a.createElement("div",{className:"input-group mb10"},o.a.createElement("select",{className:"custom-select",value:a,onChange:function(e){return t(e)}},o.a.createElement("option",{selected:!0,value:"none"},"Sort by..."),o.a.createElement("option",{value:"price"},"Price"),o.a.createElement("option",{value:"size"},"Size"),o.a.createElement("option",{value:"id"},"ID")),o.a.createElement("div",{className:"input-group-append"},o.a.createElement("button",{className:"btn btn-success",type:"button",onClick:function(){return n()}},"Sort")))},b=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).getItems=function(e,t){var n=Object(m.a)(a),o="none"==t?"/api/products?_page=".concat(e,"&_limit=20"):"/api/products?_page=".concat(e,"&_limit=20&_sort=").concat(t);p.a.get(o).then(function(e){console.log("kjsadkjad",e.data,e);var t=n.state.data;t.push.apply(t,Object(c.a)(e.data)),n.setState({data:t,loading:!1,pageLoaded:!0,sortHasChanged:!1})}).catch(function(e){console.log("error: ",e)})},a.handleChange=function(e){a.setState({sortPlaceholder:e.target.value})},a.handleClick=function(){var e=Object(m.a)(a);a.setState({sort:a.state.sortPlaceholder,loading:!0,data:[],page:1},function(){e.getItems(e.state.page,e.state.sort)})},a.state={data:[],loading:!0,pageLoaded:!1,page:1,sort:"none",sortPlaceholder:"none",sortHasChanged:!1},a}return Object(g.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this;window.onscroll=function(t){window.innerHeight+window.scrollY>=document.body.offsetHeight&&!e.state.loading&&e.state.data.length<500&&e.setState({loading:!0,page:e.state.page+1},function(){e.getItems(e.state.page,e.state.sort)})},this.getItems(this.state.page,this.state.sort)}},{key:"render",value:function(){var e=this;return this.state.pageLoaded?o.a.createElement("div",{className:"alignCenter"},o.a.createElement(w,{value:this.state.sortPlaceholder,handleChange:function(t){return e.handleChange(t)},handleClick:function(){return e.handleClick()}}),o.a.createElement(f,{items:this.state.data}),this.state.data.length<500?this.state.loading?o.a.createElement(E,null):"":null):o.a.createElement("div",{className:"alignCenter"},o.a.createElement(E,null))}}]),t}(o.a.Component);var C=function(){return o.a.createElement(b,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[18,1,2]]]);
//# sourceMappingURL=main.9bf0d721.chunk.js.map